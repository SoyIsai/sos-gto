<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CaÃ­das y Traumatismos | SOS Protocolos</title>
  <link rel="stylesheet" href="../../assets/CSS/styles.css">
  <style>
    /* Estilos especÃ­ficos para esta pÃ¡gina */
    .lesion-section { display: none; }
    .active { display: block; }
    .symptom-list { list-style-type: none; padding: 0; }
    .symptom-item { margin: 10px 0; }
    .emergencia-btn {
      background-color: #FF3A44;
      color: white;
      padding: 15px;
      border-radius: 50%;
      position: fixed;
      bottom: 20px;
      right: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      display: none;
    }
    .illustration {
      max-width: 100%;
      height: auto;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <header class="protocol-header">
    <h1>âš ï¸ Protocolo: CaÃ­das y Traumatismos</h1>
    <p>GuÃ­a paso a paso para actuar ante fracturas, esguinces y traumatismos craneales</p>
  </header>

  <main class="protocolo-container">
    <!-- Selector de tipo de lesiÃ³n -->
    <section class="selector-section">
      <label for="tipo-lesion"><strong>Selecciona el tipo de lesiÃ³n:</strong></label>
      <select id="tipo-lesion" class="selector">
        <option value="" disabled selected>-- Elige una opciÃ³n --</option>
        <option value="fractura">Fractura Ã³sea</option>
        <option value="esguince">Esguince/LuxaciÃ³n</option>
        <option value="craneal">Traumatismo craneal</option>
      </select>
    </section>

    <!-- Contenido dinÃ¡mico -->
    <section id="fractura" class="lesion-section">
      <h2>ğŸ¦´ Fractura Ã“sea</h2>
      <img src="../../assets/img/fractura-illustration.svg" alt="IlustraciÃ³n de fractura" class="illustration">
      
      <h3>ğŸ” SÃ­ntomas:</h3>
      <ul class="symptom-list">
        <li class="symptom-item">âœ… Dolor intenso en el Ã¡rea afectada</li>
        <li class="symptom-item">âœ… Deformidad visible o hinchazÃ³n</li>
        <li class="symptom-item">âœ… Incapacidad para mover la extremidad</li>
      </ul>

      <h3>ğŸ©¹ Primeros Auxilios:</h3>
      <ol class="steps-list">
        <li>Inmoviliza el Ã¡rea con una fÃ©rula o material rÃ­gido (revista, tabla).</li>
        <li>Aplica hielo envuelto en tela por 15 minutos.</li>
        <li>Eleva la extremidad si es posible para reducir hinchazÃ³n.</li>
        <li>No intentes recolocar el hueso.</li>
        <li>Traslada a centro mÃ©dico.</li>
      </ol>

      <div class="warning-box">
        <strong>ğŸš¨ Alerta:</strong> Si la fractura es expuesta (hueso visible), cubre con gasa estÃ©ril y NO laves.
      </div>
    </section>

    <section id="esguince" class="lesion-section">
      <h2>ğŸ¦µ Esguince/LuxaciÃ³n</h2>
      <img src="../../assets/img/esguince-illustration.svg" alt="IlustraciÃ³n de esguince" class="illustration">
      
      <h3>ğŸ” SÃ­ntomas:</h3>
      <ul class="symptom-list">
        <li class="symptom-item">âœ… Dolor al mover la articulaciÃ³n</li>
        <li class="symptom-item">âœ… HinchazÃ³n y hematoma</li>
        <li class="symptom-item">âœ… SensaciÃ³n de inestabilidad</li>
      </ul>

      <h3>ğŸ©¹ Primeros Auxilios:</h3>
      <ol class="steps-list">
        <li>Aplica el mÃ©todo <strong>R.I.C.E</strong>:</li>
        <ul>
          <li><strong>R</strong>eposo: No apoyar peso</li>
          <li><strong>I</strong>ce: Hielo 15 min cada 2 horas</li>
          <li><strong>C</strong>ompresiÃ³n: Venda elÃ¡stica (no apretar)</li>
          <li><strong>E</strong>levaciÃ³n: Sobre el nivel del corazÃ³n</li>
        </ul>
        <li>Evita calor en primeras 48 horas.</li>
      </ol>
    </section>

    <section id="craneal" class="lesion-section">
      <h2>ğŸ§  Traumatismo Craneal</h2>
      <img src="../../assets/img/craneal-illustration.svg" alt="IlustraciÃ³n de traumatismo" class="illustration">
      
      <h3>ğŸ” SÃ­ntomas Peligrosos:</h3>
      <ul class="symptom-list">
        <li class="symptom-item">âœ… PÃ©rdida de conciencia (aunque sea breve)</li>
        <li class="symptom-item">âœ… ConfusiÃ³n o desorientaciÃ³n</li>
        <li class="symptom-item">âœ… Pupilas desiguales</li>
        <li class="symptom-item">âœ… Sangrado por oÃ­dos/nariz</li>
      </ul>

      <h3>ğŸ©¹ Primeros Auxilios:</h3>
      <ol class="steps-list">
        <li>MantÃ©n a la persona inmÃ³vil (evita mover el cuello).</li>
        <li>Si estÃ¡ inconsciente, colÃ³cala en <strong>posiciÃ³n lateral</strong>.</li>
        <li>Controla sangrados con gasa estÃ©ril (sin presiÃ³n fuerte).</li>
        <li>Monitoriza conciencia cada 15 minutos.</li>
        <li><strong>Â¡Busca atenciÃ³n mÃ©dica inmediata!</strong></li>
      </ol>
    </section>

    <!-- Kit Digital Integrado -->
    <section id="kit-section" class="hidden">
      <h3>ğŸ‘œ Kit Recomendado:</h3>
      <div id="kit-content"></div>
    </section>
  </main>

  <!-- Botones de acciÃ³n -->
  <button id="emergencia-btn" class="emergencia-btn">ğŸš¨<br>911</button>
  <button id="kit-btn" class="floating-btn">ğŸ‘œ<br>Kit</button>

  <!-- Footer con integraciÃ³n a otras herramientas -->
  <footer class="protocol-footer">
    <button id="mapa-btn" class="footer-btn">ğŸ—ºï¸ Ver Hospitales Cercanos</button>
    <button id="plan-btn" class="footer-btn">ğŸ“ AÃ±adir a Mi Plan</button>
  </footer>

  <script>
    // ===== DOM Elements =====
    const tipoLesionSelect = document.getElementById('tipo-lesion');
    const lesionSections = document.querySelectorAll('.lesion-section');
    const emergenciaBtn = document.getElementById('emergencia-btn');
    const kitBtn = document.getElementById('kit-btn');
    const kitSection = document.getElementById('kit-section');
    const kitContent = document.getElementById('kit-content');
    const mapaBtn = document.getElementById('mapa-btn');
    const planBtn = document.getElementById('plan-btn');

    // ===== Datos DinÃ¡micos =====
    const kits = {
      fractura: ['FÃ©rula o material rÃ­gido', 'Vendas triangulares', 'Bolsa de hielo', 'AnalgÃ©sicos (ibuprofeno)'],
      esguince: ['Venda elÃ¡stica', 'Compresa frÃ­a instantÃ¡nea', 'Almohada para elevaciÃ³n'],
      craneal: ['Linterna pequeÃ±a', 'Gasas estÃ©riles', 'TermÃ³metro', 'Lista de contactos de emergencia']
    };

    // ===== Event Listeners =====
    tipoLesionSelect.addEventListener('change', (e) => {
      const selectedValue = e.target.value;
      
      // Oculta todas las secciones
      lesionSections.forEach(section => {
        section.classList.remove('active');
      });
      
      // Muestra la seleccionada
      if (selectedValue) {
        document.getElementById(selectedValue).classList.add('active');
        emergenciaBtn.style.display = selectedValue === 'craneal' ? 'block' : 'none';
      }
    });

    kitBtn.addEventListener('click', () => {
      const selectedValue = tipoLesionSelect.value;
      if (!selectedValue) return;
      
      kitContent.innerHTML = `
        <h4>Para ${getLesionName(selectedValue)} necesitas:</h4>
        <ul>${kits[selectedValue].map(item => `<li>${item}</li>`).join('')}</ul>
      `;
      
      kitSection.classList.toggle('hidden');
    });

    emergenciaBtn.addEventListener('click', () => {
      if (confirm('Â¿Llamar al servicio de emergencias (911)?')) {
        // Simular llamada (en producciÃ³n usar tel://)
        console.log('Llamando a emergencias...');
        alert('Emergencia confirmada. Mostrando ubicaciÃ³n en mapa.');
        // IntegraciÃ³n con mapa.js
        if (window.mapaTools) {
          window.mapaTools.mostrarRutaHospital();
        }
      }
    });

    mapaBtn.addEventListener('click', () => {
      // Redirigir al mapa con parÃ¡metros
      window.location.href = '../../herramientas/mapa-vivo/?tipo=hospital';
    });

    // ===== Funciones Utiles =====
    function getLesionName(value) {
      const names = {
        fractura: 'fracturas',
        esguince: 'esguinces',
        craneal: 'traumatismos craneales'
      };
      return names[value] || '';
    }
  </script>
</body>
</html>
